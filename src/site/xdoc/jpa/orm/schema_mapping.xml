<?xml version="1.0" encoding="iso-8859-1"?>
<document xmlns="http://maven.apache.org/XDOC/2.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/XDOC/2.0 http://maven.apache.org/xsd/xdoc-2.0.xsd">
    <properties>
        <title>JPA Schema Mapping</title>
    </properties>

    <body>
        <section name="JPA : Schema Mapping">
            <p>
                You saw in our <a href="../class_mapping.html">basic class mapping guide</a> how you define a classes basic persistence, notating which fields are persisted. 
                The next step is to define how it maps to the datastore. Fields of a class are mapped to <i>columns</i> of a <i>table</i> (note that with some datastores it is not called
                a 'table' or 'column', but the concept is similar and we use 'table' and 'column' here to represent the mapping). 
                If you don't specify the table and column names, then DataNucleus will generate table and column names for you.
                <b>You should specify your table and column names if you have an existing schema.</b> 
                Failure to do so will mean that DataNucleus uses its own names and these will almost certainly not match what you have in the datastore.
                There are several aspects to cover here
            </p>
            <ul>
                <li><a href="#names">Table and column names</a></li>
                <li><a href="#nullsdefaults">Column nullability and default value</a></li>
                <li><a href="#columntypes">Column Types</a></li>
                <li><a href="#columnposition">Position of a column in a table</a></li>
                <li><a href="#rdbmsviews">RDBMS : Mapping a class to an RDBMS View</a></li>
                <li><a href="#rdbmstypes">RDBMS : Supported types for a field</a></li>
            </ul>

            <a name="names"/>
            <subsection name="Tables and Column names">
                <p> 
                    The main thing that developers want to do when they set up the persistence of their data is to control the names of the 
                    tables and columns used for storing the classes and fields. This is an essential step when mapping to an existing schema,
                    because it is necessary to map the classes onto the existing database entities. Let's take an example
                </p>
<source>
public class Hotel
{
    private String name;
    private String address;
    private String telephoneNumber;
    private int numberOfRooms;
    ...
}</source>      
                <p>In our case we want to map this class to a table called <b>ESTABLISHMENT</b>, and has columns <i>NAME</i>, 
                    <i>DIRECTION</i>, <i>PHONE</i> and <i>NUMBER_OF_ROOMS</i> (amongst other things). So 
                    we define our Meta-Data like this</p>
<source><![CDATA[
<entity class="Hotel">
    <table name="ESTABLISHMENT"/>
    <attributes>
        <basic name="name">
            <column name="NAME"/>
        </basic>
        <basic name="address">
            <column name="DIRECTION"/>
        </basic>
        <basic name="telephoneNumber">
            <column name="PHONE"/>
        </basic>
        <basic name="numberOfRooms">
            <column name="NUMBER_OF_ROOMS"/>
        </basic>
    </attributes>
</entity>]]></source>
                <p>
                    So we have defined the table and the column names.
                    It should be mentioned that if you don't specify the table and column names then DataNucleus will generate
                    names for the datastore identifiers consistent with the JPA specification.
                    The table name will be based on the class name, and the column names will be based on the field names and 
                    the role of the field (if part of a relationship).
                </p>
                <p>See also :-</p>
                <ul>
                    <li><a href="datastore_identifiers.html">Identifier Guide</a> - defining the identifiers to use for table/column names</li>
                    <li><a href="../metadata_xml.html#column">MetaData reference for &lt;column&gt; element</a></li>
                </ul>
                <br/>
            </subsection>

            <a name="nullsdefaults"/>
            <subsection name="Column nullability and default values">
                <p>
                    So we've seen how to specify the basic structure of a table, naming the table and its columns, and how to control the 
                    types of the columns. We can extend this further to control whether the columns are allowed to contain nulls. Let's take a 
                    related class for our hotel. Here we have a class to model the payments made to the hotel.
                </p>
                <source>
public class Payment
{
    Customer customer;
    String bankTransferReference;
    String currency;
    double amount;
}</source>
                <p>
                    In this class we can model payments from a customer of an amount. Where the customer pays by bank transfer we can save the
                    reference number. Since the bank transfer reference is optional we want that column to be nullable. So let's
                    specify the MetaData for the class.
                </p>
                <source><![CDATA[
<entity class="Payment">
    <attributes>
        <one-to-one name="customer">
            <primary-key-join-column name="CUSTOMER_ID"/>
        </one-to-one>
        <basic name="bankTransferReference">
            <column name="TRANSFER_REF" nullable="true"/>
        </basic>
        <basic name="currency">
            <column name="CURRENCY" default-value="GBP"/>
        </basic>
        <basic name="amount">
            <column name="AMOUNT"/>
        </basic>
    </attributes>
</entity>]]></source>
                <p>
                    So we make use of the <i>nullable</i> attribute. The table, when created by DataNucleus, will then provide the nullability 
                    that we require. Unfortunately with JPA there is no way to specify a default value for a field when it hasn't been
                    set (unlike JDO where you can do that).
                </p>
                <p>See also :-</p>
                <ul>
                    <li><a href="../metadata_xml.html#column">MetaData reference for &lt;column&gt; element</a></li>
                </ul>
                <br/>
            </subsection>

            <a name="columntypes"/>
            <subsection name="Column types">
                <p>
                    DataNucleus will provide a default type for any columns that it creates, but it will allow users to 
                    override this default. The default that DataNucleus chooses is always based on the Java type for the 
                    field being mapped. For example a Java field of type "int" will be mapped to a column type of INTEGER 
                    in RDBMS datastores. Similarly String will be mapped to VARCHAR. JPA does NOT allow detailed control 
                    over the JDBC type as such, with the exception of distinguishing BLOB/CLOB/TIME/TIMESTAMP types. 
                    Fortunately DataNucleus (from v3.0.2) provides an extension to overcome this flaw in the JPA spec.
                    Here we make use of a DataNucleus annotation <b>@JdbcType</b>
                </p>
                <source><![CDATA[
public class Payment
{
    @JdbcType("CHAR")
    String currency;

    ...
}]]></source>
                <p>
                    So we defined the JDBC type that this field will use (rather than the default of VARCHAR).
                </p>
                <p>
                    JPA does allow permit control over the length/precision/scale of columns. So we define this as follows
                </p>
                <source><![CDATA[
<entity name="Payment">
    <attributes>
        <one-to-one name="customer">
            <primary-key-join-column name="CUSTOMER_ID"/>
        </one-to-one>
        <basic name="bankTransferReference">
            <column name="TRANSFER_REF" nullable="true" length="255"/>
        </basic>
        <basic name="currency">
            <column name="CURRENCY" default-value="GBP" length="3"/>
        </basic>
        <basic name="amount">
            <column name="AMOUNT" precision="10" scale="2"/>
        </basic>
    </attributes>
</entity>
]]></source>
                <p>
                    So we have defined TRANSFER_REF to use VARCHAR(255) column type, CURRENCY to use (VAR)CHAR(3) column type, and AMOUNT to use
                    DECIMAL(10,2) column type.
                </p>
                <p>See also :-</p>
                <ul>
                    <li><a href="../types.html">Types Guide</a> - defining mapping of Java types</li>
                    <li><a href="../../datastores/rdbms_datastore_types.html">RDBMS Types Guide</a> - defining mapping of Java types to JDBC/SQL types</li>
                    <li><a href="../metadata_xml.html#column">MetaData reference for &lt;column&gt; element</a></li>
                </ul>
            </subsection>

            <a name="columnposition"/>
            <subsection name="columnposition">
                <p>
                    With some datastores it is desirable to be able to specify the relative position of a column in the table schema. 
                    The default (for DataNucleus) is just to put them in ascending alphabetical order.
                    DataNucleus allows an extension to JPA providing definition of this using the <i>position</i> of a <b>column</b>.
                    See <a href="../fields_properties.html#columnposition">fields/properties column positioning docs</a> for details.
                </p>
            </subsection>

            <a name="rdbmsviews"/>
            <subsection name="RDBMS : Views">
                <img src="../../images/nucleus_extension.gif" alt=""/>
                <p>
                    The standard situation with an RDBMS datastore is to map classes to <b>Tables</b>. 
                    The majority of RDBMS also provide support for <b>Views</b>, providing the equivalent of a read-only SELECT across various tables. 
                    DataNucleus also provides support for querying such Views. This provides more flexibility to the user where they have data and need to display it in their application. 
                    Support for Views is described below.
                </p>
                <p>
                    When you want to access data according to a View, you are required to provide a class that will accept
                    the values from the View when queried, and Meta-Data for the class that defines the View and how
                    it maps onto the provided class. Let's take an example. We have a View SALEABLE_PRODUCT in our database 
                    as follows, defined based on data in a PRODUCT table.
                </p>
<source><![CDATA[
CREATE VIEW SALEABLE_PRODUCT (ID, NAME, PRICE, CURRENCY) AS
    SELECT ID, NAME, CURRENT_PRICE AS PRICE, CURRENCY FROM PRODUCT
    WHERE PRODUCT.STATUS_ID = 1]]></source>
                <p>
                    So we define a class to receive the values from this <b>View</b>, and define how it is mapped to the view.
                </p>
<source><![CDATA[
package mydomain.views;

@Entity
@Extension(vendorName="datanucleus", key="view-definition", value="CREATE VIEW SALEABLE_PRODUCT
(
    {this.id},
    {this.name},
    {this.price},
    {this.currency}
) AS
SELECT ID, NAME, CURRENT_PRICE AS PRICE, CURRENCY FROM PRODUCT
WHERE PRODUCT.STATUS_ID = 1")
public class SaleableProduct
{
    String id;
    String name;
    double price;
    String currency;

    public String getId()
    {
        return id;
    }

    public String getName()
    {
        return name;
    }

    public double getPrice()
    {
        return price;
    }

    public String getCurrency()
    {
        return currency;
    }
}]]></source>
                <p>
                    Please note the following
                </p>
                <ul>
                    <li>We've defined our class as using "nondurable" identity. This is an important step since rows of the <b>View</b>
                        typically don't operate in the same way as rows of a <b>Table</b>, not mapping onto a persisted updateable object as such</li>
                    <li>We've specified the "table", which in this case is the view name - otherwise DataNucleus would create a name
                       for the view based on the class name.</li>
                    <li>We've defined a DataNucleus extension <i>view-definition</i> that defines the view for this class. If the view
                        doesn't already exist it doesn't matter since DataNucleus (when used with <i>autoCreateSchema</i>) will execute this construction definition.</li>
                    <li>The <i>view-definition</i> can contain macros utilising the names of the fields in the class, and hence
                        borrowing their column names (if we had defined column names for the fields of the class).</li>
                    <li>You can also utilise other classes in the macros, and include them via a DataNucleus MetaData extension <i>view-imports</i> (not shown here)</li>
                    <li>If your <b>View</b> already exists you are still required to provide a <i>view-definition</i> even though
                        DataNucleus will not be utilising it, since it also uses this attribute as the flag for whether it is a <b>View</b>
                        or a <b>Table</b> - just make sure that you specify the "table" also in the MetaData.</li>
                </ul>
                <p>
                    We can now utilise this class within normal DataNucleus JPA querying operation.
                </p>
<source><![CDATA[
Query<MyViewClass> q = em.createQuery("SELECT p FROM SaleableProduct p", SaleableProduct.class);
List<MyViewClass> results = q.getResultList();]]></source>
                <p>
                    Hopefully that has given enough detail on how to create and access views from with a DataNucleus-enabled application.
                </p>
            </subsection>

            <a name="rdbmstypes"/>
            <subsection name="RDBMS : Datastore Types">
                <p>
                    As we saw in the <a href="../types.html">Types Guide</a> DataNucleus supports the persistence 
                    of a large range of Java field types. With RDBMS datastores, we have the notion of tables/columns in 
                    the datastore and so each Java type is mapped across to a column or a set of columns in a table. It 
                    is important to understand this mapping when mapping to an existing schema for example. In RDBMS 
                    datastores a java type is stored using JDBC types. DataNucleus supports the use of the vast majority of the available JDBC types.
                </p>

                <p>
                    When persisting a Java type in general it is persisted into a single column. 
                    For example a String will be persisted into a VARCHAR column by default. Some types (e.g Color) have more 
                    information to store than we can conveniently persist into a single column and so use multiple 
                    columns. Other types (e.g Collection) store their information in other ways, such as foreign keys.
                </p>
                <img src="../../images/rdbms_types.jpg" border="0" alt=""/>
                <p>
                    This table shows the Java types we saw earlier and whether they can be queried using JDOQL queries, 
                    and what JDBC types can be used to store them in your RDBMS datastore. Not all RDBMS datastores 
                    support all of these options. While DataNucleus always tries to provide a complete list sometimes 
                    this is impossible due to limitations in the underlying JDBC driver
                </p>
                <table>
                    <tr>
                        <th>Java Type</th>
                        <th>Number<br/>Columns</th>
                        <th>Queryable</th>
                        <th>JDBC Type(s)</th>
                    </tr>
                    <tr>
                        <td>boolean</td>
                        <td>1</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td><b>BIT</b>, CHAR ('Y','N'), BOOLEAN, TINYINT, SMALLINT, NUMERIC</td>
                    </tr>
                    <tr>
                        <td>byte</td>
                        <td>1</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td><b>TINYINT</b>, SMALLINT, NUMERIC</td>
                    </tr>
                    <tr>
                        <td>char</td>
                        <td>1</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td><b>CHAR</b>, INTEGER, NUMERIC</td>
                    </tr>
                    <tr>
                        <td>double</td>
                        <td>1</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td><b>DOUBLE</b>, DECIMAL, FLOAT</td>
                    </tr>
                    <tr>
                        <td>float</td>
                        <td>1</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td><b>FLOAT</b>, REAL, DOUBLE, DECIMAL</td>
                    </tr>
                    <tr>
                        <td>int</td>
                        <td>1</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td><b>INTEGER</b>, BIGINT, NUMERIC</td>
                    </tr>
                    <tr>
                        <td>long</td>
                        <td>1</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td><b>BIGINT</b>, NUMERIC, DOUBLE, DECIMAL, INTEGER</td>
                    </tr>
                    <tr>
                        <td>short</td>
                        <td>1</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td><b>SMALLINT</b>, INTEGER, NUMERIC</td>
                    </tr>
                    <tr>
                        <td>boolean[]</td>
                        <td>1</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/> [5]</td>
                        <td>LONGVARBINARY, BLOB</td>
                    </tr>
                    <tr>
                        <td>byte[]</td>
                        <td>1</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/> [5]</td>
                        <td>LONGVARBINARY, BLOB</td>
                    </tr>
                    <tr>
                        <td>char[]</td>
                        <td>1</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/> [5]</td>
                        <td>LONGVARBINARY, BLOB</td>
                    </tr>
                    <tr>
                        <td>double[]</td>
                        <td>1</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/> [5]</td>
                        <td>LONGVARBINARY, BLOB</td>
                    </tr>
                    <tr>
                        <td>float[]</td>
                        <td>1</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/> [5]</td>
                        <td>LONGVARBINARY, BLOB</td>
                    </tr>
                    <tr>
                        <td>int[]</td>
                        <td>1</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/> [5]</td>
                        <td>LONGVARBINARY, BLOB</td>
                    </tr>
                    <tr>
                        <td>long[]</td>
                        <td>1</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/> [5]</td>
                        <td>LONGVARBINARY, BLOB</td>
                    </tr>
                    <tr>
                        <td>short[]</td>
                        <td>1</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/> [5]</td>
                        <td>LONGVARBINARY, BLOB</td>
                    </tr>

                    <!-- java.lang -->
                    <tr>
                        <td>java.lang.Boolean</td>
                        <td>1</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td><b>BIT</b>, CHAR('Y','N'), BOOLEAN, TINYINT, SMALLINT</td>
                    </tr>
                    <tr>
                        <td>java.lang.Byte</td>
                        <td>1</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td><b>TINYINT</b>, SMALLINT, NUMERIC</td>
                    </tr>
                    <tr>
                        <td>java.lang.Character</td>
                        <td>1</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td><b>CHAR</b>, INTEGER, NUMERIC</td>
                    </tr>
                    <tr>
                        <td>java.lang.Double</td>
                        <td>1</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td><b>DOUBLE</b>, DECIMAL, FLOAT</td>
                    </tr>
                    <tr>
                        <td>java.lang.Float</td>
                        <td>1</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td><b>FLOAT</b>, REAL, DOUBLE, DECIMAL</td>
                    </tr>
                    <tr>
                        <td>java.lang.Integer</td>
                        <td>1</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td><b>INTEGER</b>, BIGINT, NUMERIC</td>
                    </tr>
                    <tr>
                        <td>java.lang.Long</td>
                        <td>1</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td><b>BIGINT</b>, NUMERIC, DOUBLE, DECIMAL, INTEGER</td>
                    </tr>
                    <tr>
                        <td>java.lang.Short</td>
                        <td>1</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td><b>SMALLINT</b>, INTEGER, NUMERIC</td>
                    </tr>
                    <tr>
                        <td>java.lang.Boolean[]</td>
                        <td>1</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/> [5]</td>
                        <td>LONGVARBINARY, BLOB</td>
                    </tr>
                    <tr>
                        <td>java.lang.Byte[]</td>
                        <td>1</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/> [5]</td>
                        <td>LONGVARBINARY, BLOB</td>
                    </tr>
                    <tr>
                        <td>java.lang.Character[]</td>
                        <td>1</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/> [5]</td>
                        <td>LONGVARBINARY, BLOB</td>
                    </tr>
                    <tr>
                        <td>java.lang.Double[]</td>
                        <td>1</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/> [5]</td>
                        <td>LONGVARBINARY, BLOB</td>
                    </tr>
                    <tr>
                        <td>java.lang.Float[]</td>
                        <td>1</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/> [5]</td>
                        <td>LONGVARBINARY, BLOB</td>
                    </tr>
                    <tr>
                        <td>java.lang.Integer[]</td>
                        <td>1</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/> [5]</td>
                        <td>LONGVARBINARY, BLOB</td>
                    </tr>
                    <tr>
                        <td>java.lang.Long[]</td>
                        <td>1</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/> [5]</td>
                        <td>LONGVARBINARY, BLOB</td>
                    </tr>
                    <tr>
                        <td>java.lang.Short[]</td>
                        <td>1</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/> [5]</td>
                        <td>LONGVARBINARY, BLOB</td>
                    </tr>
                    <tr>
                        <td>java.lang.Number</td>
                        <td>1</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>java.lang.Object</td>
                        <td>1</td>
                        <td></td>
                        <td>LONGVARBINARY, BLOB</td>
                    </tr>
                    <tr>
                        <td>java.lang.String [8]</td>
                        <td>1</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td><b>VARCHAR</b>, CHAR, LONGVARCHAR, CLOB, BLOB, DATALINK [6], UNIQUEIDENTIFIER [7], XMLTYPE [9]</td>
                    </tr>
                    <tr>
                        <td>java.lang.StringBuffer [8]</td>
                        <td>1</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td><b>VARCHAR</b>, CHAR, LONGVARCHAR, CLOB, BLOB, DATALINK [6], UNIQUEIDENTIFIER [7], XMLTYPE [9]</td>
                    </tr>
                    <tr>
                        <td>java.lang.String[]</td>
                        <td>1</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/> [5]</td>
                        <td>LONGVARBINARY, BLOB</td>
                    </tr>
                    <tr>
                        <td>java.lang.Enum</td>
                        <td>1</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td>LONGVARBINARY, BLOB, VARCHAR, INTEGER</td>
                    </tr>
                    <tr>
                        <td>java.lang.Enum[]</td>
                        <td>1</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/> [5]</td>
                        <td>LONGVARBINARY, BLOB</td>
                    </tr>

                    <!-- java.math -->
                    <tr>
                        <td>java.math.BigDecimal</td>
                        <td>1</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td><b>DECIMAL</b>, NUMERIC</td>
                    </tr>
                    <tr>
                        <td>java.math.BigInteger</td>
                        <td>1</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td><b>NUMERIC</b>, DECIMAL</td>
                    </tr>
                    <tr>
                        <td>java.math.BigDecimal[]</td>
                        <td>1</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/> [5]</td>
                        <td>LONGVARBINARY, BLOB</td>
                    </tr>
                    <tr>
                        <td>java.math.BigInteger[]</td>
                        <td>1</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/> [5]</td>
                        <td>LONGVARBINARY, BLOB</td>
                    </tr>

                    <!-- java.sql -->
                    <tr>
                        <td>java.sql.Date</td>
                        <td>1</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td><b>DATE</b>, TIMESTAMP</td>
                    </tr>
                    <tr>
                        <td>java.sql.Time</td>
                        <td>1</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td><b>TIME</b>, TIMESTAMP</td>
                    </tr>
                    <tr>
                        <td>java.sql.Timestamp</td>
                        <td>1</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td><b>TIMESTAMP</b></td>
                    </tr>

                    <!-- java.util -->
                    <tr>
                        <td>java.util.ArrayList</td>
                        <td>0</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>java.util.BitSet</td>
                        <td>0</td>
                        <td><img src="../../images/icon_error_sml.gif" border="0" alt=""/></td>
                        <td>LONGVARBINARY, BLOB</td>
                    </tr>
                    <tr>
                        <td>java.util.Calendar [3]</td>
                        <td>1 or 2</td>
                        <td><img src="../../images/icon_error_sml.gif" border="0" alt=""/></td>
                        <td>INTEGER, VARCHAR, CHAR</td>
                    </tr>
                    <tr>
                        <td>java.util.Collection</td>
                        <td>0</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>java.util.Currency</td>
                        <td>1</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td><b>VARCHAR</b>, CHAR</td>
                    </tr>
                    <tr>
                        <td>java.util.Date</td>
                        <td>1</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td><b>TIMESTAMP</b>, DATE, CHAR, BIGINT</td>
                    </tr>
                    <tr>
                        <td>java.util.Date[]</td>
                        <td>1</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/> [5]</td>
                        <td>LONGVARBINARY, BLOB</td>
                    </tr>
                    <tr>
                        <td>java.util.GregorianCalendar [2]</td>
                        <td>1 or 2</td>
                        <td><img src="../../images/icon_error_sml.gif" border="0" alt=""/></td>
                        <td>INTEGER, VARCHAR, CHAR</td>
                    </tr>
                    <tr>
                        <td>java.util.HashMap</td>
                        <td>0</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>java.util.HashSet</td>
                        <td>0</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>java.util.Hashtable</td>
                        <td>0</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>java.util.LinkedHashMap</td>
                        <td>0</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>java.util.LinkedHashSet</td>
                        <td>0</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>java.util.LinkedList</td>
                        <td>0</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>java.util.List</td>
                        <td>0</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>java.util.Locale [8]</td>
                        <td>1</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td><b>VARCHAR</b>, CHAR, LONGVARCHAR, CLOB, BLOB, DATALINK [6], UNIQUEIDENTIFIER [7], XMLTYPE [9]</td>
                    </tr>
                    <tr>
                        <td>java.util.Locale[]</td>
                        <td>1</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/> [5]</td>
                        <td>LONGVARBINARY, BLOB</td>
                    </tr>
                    <tr>
                        <td>java.util.Map</td>
                        <td>0</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>java.util.Properties</td>
                        <td>0</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>java.util.PriorityQueue</td>
                        <td>0</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>java.util.Queue</td>
                        <td>0</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>java.util.Set</td>
                        <td>0</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>java.util.SortedMap</td>
                        <td>0</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>java.util.SortedSet</td>
                        <td>0</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>java.util.Stack</td>
                        <td>0</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>java.util.TimeZone [8]</td>
                        <td>1</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td><b>VARCHAR</b>, CHAR, LONGVARCHAR, CLOB, BLOB, DATALINK [7], UNIQUEIDENTIFIER [8], XMLTYPE [9]</td>
                    </tr>
                    <tr>
                        <td>java.util.TreeMap</td>
                        <td>0</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>java.util.TreeSet</td>
                        <td>0</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>java.util.UUID [8]</td>
                        <td>1</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td><b>VARCHAR</b>, CHAR, LONGVARCHAR, CLOB, BLOB, DATALINK [7], UNIQUEIDENTIFIER [8], XMLTYPE [9]</td>
                    </tr>
                    <tr>
                        <td>java.util.Vector</td>
                        <td>0</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td></td>
                    </tr>

                    <!-- java.awt -->
                    <tr>
                        <td>java.awt.Color [1]</td>
                        <td>4</td>
                        <td><img src="../../images/icon_error_sml.gif" border="0" alt=""/></td>
                        <td>INTEGER</td>
                    </tr>
                    <tr>
                        <td>java.awt.Point [2]</td>
                        <td>2</td>
                        <td><img src="../../images/icon_error_sml.gif" border="0" alt=""/></td>
                        <td>INTEGER</td>
                    </tr>
                    <tr>
                        <td>java.awt.image.BufferedImage [4]</td>
                        <td>1</td>
                        <td><img src="../../images/icon_error_sml.gif" border="0" alt=""/></td>
                        <td>LONGVARBINARY, BLOB</td>
                    </tr>
                    <tr>
                        <td>java.net.URI [8]</td>
                        <td>1</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td><b>VARCHAR</b>, CHAR, LONGVARCHAR, CLOB, BLOB, DATALINK [7], UNIQUEIDENTIFIER [8], XMLTYPE [9]</td>
                    </tr>                    
                    <tr>
                        <td>java.net.URL [8]</td>
                        <td>1</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td><b>VARCHAR</b>, CHAR, LONGVARCHAR, CLOB, BLOB, DATALINK [7], UNIQUEIDENTIFIER [8], XMLTYPE [9]</td>
                    </tr>                    
                    <tr>
                        <td>java.io.Serializable</td>
                        <td>1</td>
                        <td><img src="../../images/icon_error_sml.gif" border="0" alt=""/></td>
                        <td>LONGVARBINARY, BLOB</td>
                    </tr>

                    <tr>
                        <td>Entity</td>
                        <td>1</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td>[embedded]</td>
                    </tr>
                    <tr>
                        <td>Entity[]</td>
                        <td>1</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/> [5]</td>
                        <td></td>
                    </tr>
                </table>
                <ul>
                    <li><b>[1]</b> - <i>java.awt.Color</i> - stored in 4 columns (red, green, blue, alpha). ColorSpace is not persisted.</li>
                    <li><b>[2]</b> - <i>java.awt.Point</i> - stored in 2 columns (x and y).</li>
                    <li><b>[3]</b> - <i>java.util.Calendar</i> - stored in 2 columns (milliseconds and timezone).</li>
                    <li><b>[4]</b> - <i>java.awt.image.BufferedImage</i> is stored using JPG image format</li>
                    <li><b>[5]</b> - Array types are queryable if not serialised, but stored to many rows</li>
                    <li><b>[6]</b> - DATALINK JDBC type supported on DB2 only. Uses the SQL function 
                        DLURLCOMPLETEONLY to fetch from the datastore. You can override this using the select-function extension. See the 
                        <a href="../metadata_xml.html#field_select_function">JDO MetaData reference</a>.</li>
                    <li><b>[7]</b> - UNIQUEIDENTIFIER JDBC type supported on MSSQL only.</li>
                    <li><b>[8]</b> - Oracle treats an empty string as the same as NULL. To workaround this limitation 
                        DataNucleus replaces the empty string with the character \u0001.</li>
                    <li><b>[9]</b> - XMLTYPE JDBC type supported on Oracle only.</li>
                </ul>
                <p>
                    <a href="../../extensions/rdbms_datastore_types.html"><img src="../../images/nucleus_plugin.gif" border="0" alt=""/></a>
                    If you need to extend the provided DataNucleus capabilities in terms of its datastore types support you can utilise a plugin point.
                </p>
                <br/>

                <p>
                    DataNucleus provides support for the majority of the JDBC types with RDBMS. The support is shown below.
                </p>
                <table>
                    <tr>
                        <th>JDBC Type</th>
                        <th>Supported</th>
                        <th>Restrictions</th>
                    </tr>
                    <tr>
                        <td>ARRAY</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td>Only for PostgreSQL array type</td>
                    </tr>
                    <tr>
                        <td>BIGINT</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td/>
                    </tr>
                    <tr>
                        <td>BINARY</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                    	<td>Only for geospatial types on MySQL</td>
                    </tr>
                    <tr>
                        <td>BIT</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td/>
                    </tr>
                    <tr>
                        <td>BLOB</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td/>
                    </tr>
                    <tr>
                        <td>BOOLEAN</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td/>
                    </tr>
                    <tr>
                        <td>CHAR</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td/>
                    </tr>
                    <tr>
                        <td>CLOB</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td/>
                    </tr>
                    <tr>
                        <td>DATALINK</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td>Only on DB2</td>
                    </tr>
                    <tr>
                        <td>DATE</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td/>
                    </tr>
                    <tr>
                        <td>DECIMAL</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td/>
                    </tr>
                    <tr>
                        <td>DISTINCT</td>
                        <td><img src="../../images/icon_error_sml.gif" border="0" alt=""/></td>
                        <td/>
                    </tr>
                    <tr>
                        <td>DOUBLE</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td/>
                    </tr>
                    <tr>
                        <td>FLOAT</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td/>
                    </tr>
                    <tr>
                        <td>INTEGER</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td/>
                    </tr>
                    <tr>
                        <td>JAVA_OBJECT</td>
                        <td><img src="../../images/icon_error_sml.gif" border="0" alt=""/></td>
                        <td/>
                    </tr>
                    <tr>
                        <td>LONGVARBINARY</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td/>
                    </tr>
                    <tr>
                        <td>LONGVARCHAR</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td/>
                    </tr>
                    <tr>
                        <td>NCHAR</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td/>
                    </tr>
                    <tr>
                        <td>NULL</td>
                        <td><img src="../../images/icon_error_sml.gif" border="0" alt=""/></td>
                        <td/>
                    </tr>
                    <tr>
                        <td>NUMERIC</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td/>
                    </tr>
                    <tr>
                        <td>NVARCHAR</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td/>
                    </tr>
                    <tr>
                        <td>OTHER</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                    	<td></td>
                    </tr>
                    <tr>
                        <td>REAL</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td/>
                    </tr>
                    <tr>
                        <td>REF</td>
                        <td><img src="../../images/icon_error_sml.gif" border="0" alt=""/></td>
                        <td/>
                    </tr>
                    <tr>
                        <td>SMALLINT</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td/>
                    </tr>
                    <tr>
                        <td>STRUCT</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                    	<td>Only for geospatial types on Oracle</td>
                    </tr>
                    <tr>
                        <td>TIME</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td/>
                    </tr>
                    <tr>
                        <td>TIMESTAMP</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td/>
                    </tr>
                    <tr>
                        <td>TINYINT</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td/>
                    </tr>
                    <tr>
                        <td>VARBINARY</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td/>
                    </tr>
                    <tr>
                        <td>VARCHAR</td>
                        <td><img src="../../images/icon_success_sml.gif" border="0" alt=""/></td>
                        <td/>
                    </tr>
                </table>
            </subsection>
		</section>
	</body>
</document>