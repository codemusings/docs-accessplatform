<?xml version="1.0" encoding="iso-8859-1"?>
<document xmlns="http://maven.apache.org/XDOC/2.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/XDOC/2.0 http://maven.apache.org/xsd/xdoc-2.0.xsd">
    <properties>
        <title>JPQL Spatial Functions</title>
    </properties>

    <body>
        <section name="JPQL Geospatial Functions : RDBMS">
            <img src="../images/nucleus_extension.gif" alt=""/>
            <p>
                When querying spatial data you can make use of a set of spatial methods on the various Java geometry 
                types. The list contains all of the functions detailed in Section 3.2 of the 
                <a href="http://www.opengeospatial.org/standards/sfa">OGC Simple Features specification</a>. 
                Additionally DataNucleus provides some commonly required methods like bounding box test and datastore 
                specific functions. The following tables list all available functions as well as information about
                which RDBMS implement them. An entry in the "Result" column indicates, whether the funcion may be 
                used in the result part of a JDOQL query.
            </p>
            <p>
                <b>Functions for Constructing a Geometry Value given its Well-known Text Representation</b> (OGC SF 3.2.6)
            </p>
            <br/>
            <table>
                <tr>
                    <th>Method</th>
                    <th>Description</th>
                    <th>Specification</th>
                    <th>Result [1]</th>
                    <th>PostGIS</th>
                    <th>MySQL</th>
                    <th>Oracle Geospatial</th>
                </tr>
                <tr>
                    <td>Spatial.geomFromText(String, Integer)</td>
                    <td>Construct a Geometry value given its well- 
                        known textual representation.</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_error_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>Spatial.pointFromText(String, Integer)</td>
                    <td>Construct a Point.</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_error_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>Spatial.lineFromText(String, Integer)</td>
                    <td>Construct a LineString.</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_error_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>Spatial.polyFromText(String, Integer)</td>
                    <td>Construct a Polygon.</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_error_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>Spatial.mPointFromText(String, Integer)</td>
                    <td>Construct a MultiPoint.</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_error_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>Spatial.mLineFromText(String, Integer)</td>
                    <td>Construct a MultiLineString.</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_error_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>Spatial.mPolyFromText(String, Integer)</td>
                    <td>Construct a MultiPolygon.</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_error_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>Spatial.geomCollFromText(String, Integer)</td>
                    <td>Construct a GeometryCollection.</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_error_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
            </table>
            <p>[1] These functions can't be used in the return part because it's not possible to determine the return type from the parameters.</p>
            <br />
            <p>
                <b>Functions for Constructing a Geometry Value given its Well-known Binary Representation</b> (OGC SF 3.2.7)
            </p>
            <table>
                <tr>
                    <th>Method</th>
                    <th>Description</th>
                    <th>Specification</th>
                    <th>Result [1]</th>
                    <th>PostGIS</th>
                    <th>MySQL</th>
                    <th>Oracle Spatial</th>
                </tr>
                <tr>
                    <td>Spatial.geomFromWKB(String, Integer)</td>
                    <td>Construct a Geometry value given its well-known binary representation.</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_error_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>Spatial.pointFromWKB(String, Integer)</td>
                    <td>Construct a Point.</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_error_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>Spatial.lineFromWKB(String, Integer)</td>
                    <td>Construct a LineString.</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_error_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>Spatial.polyFromWKB(String, Integer)</td>
                    <td>Construct a Polygon.</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_error_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>Spatial.mPointFromWKB(String, Integer)</td>
                    <td>Construct a MultiPoint.</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_error_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>Spatial.mLineFromWKB(String, Integer)</td>
                    <td>Construct a MultiLineString.</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_error_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>Spatial.mPolyFromWKB(String, Integer)</td>
                    <td>Construct a MultiPolygon.</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_error_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>Spatial.geomCollFromWKB(String, Integer)</td>
                    <td>Construct a GeometryCollection.</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_error_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
            </table>
            <p>[1] These functions can't be used in the return part because it's not possible to determine the return type from the parameters.</p>
            <br />
            <p>
                <b>Functions on Type Geometry</b> (OGC SF 3.2.10)
            </p>
            <table>
                <tr>
                    <th>Method</th>
                    <th>Description</th>
                    <th>Specification</th>
                    <th>Result</th>
                    <th>PostGIS</th>
                    <th>MySQL</th>
                    <th>Oracle Spatial</th>
                </tr>
                <tr>
                    <td>Spatial.dimension(Geometry)</td>
                    <td>Returns the dimension of the Geometry.</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>Spatial.geometryType(Geometry)</td>
                    <td>Returns the name of the instantiable subtype of Geometry.</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>Spatial.asText(Geometry)</td>
                    <td>Returns the well-known textual representation.</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>Spatial.asBinary(Geometry)</td>
                    <td>Returns the well-known binary representation.</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_error_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>Spatial.srid(Geometry)</td>
                    <td>Returns the Spatial Reference System ID for this Geometry.</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>Spatial.isEmpty(Geometry)</td>
                    <td>TRUE if this Geometry corresponds to the empty set.</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_warning_sml.gif" border="0" alt=""/> [1]</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_error_sml.gif" border="0" alt=""/> [2]</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>Spatial.isSimple(Geometry)</td>
                    <td>TRUE if this Geometry is simple, as defined in the Geometry 
                        Model.</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_warning_sml.gif" border="0" alt=""/> [1]</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_error_sml.gif" border="0" alt=""/> [2]</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>Spatial.boundary(Geometry)</td>
                    <td>Returns a Geometry that is the combinatorial boundary of the Geometry.</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_error_sml.gif" border="0" alt=""/> [2]</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>Spatial.envelope(Geometry)</td>
                    <td>Returns the rectangle bounding Geometry as a Polygon.</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
            </table>
            <p>
                [1] Oracle does not allow boolean expressions in the SELECT-list.<br />
                [2] MySQL does not implement these functions.</p>
            <br/>
            <p>
                <b>Functions on Type Point</b> (OGC SF 3.2.11)
            </p>
            <table>
                <tr>
                    <th>Method</th>
                    <th>Description</th>
                    <th>Specification</th>
                    <th>Result</th>
                    <th>PostGIS</th>
                    <th>MySQL</th>
                    <th>Oracle Spatial</th>
                </tr>
                <tr>
                    <td>Spatial.x(Point)</td>
                    <td>Returns the x-coordinate of the Point as a Double.</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>Spatial.y(Point)</td>
                    <td>Returns the y-coordinate of the Point as a Double.</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
            </table>
            <br/>
            <p>
                <b>Functions on Type Curve</b> (OGC SF 3.2.12)
            </p>
            <table>
                <tr>
                    <th>Method</th>
                    <th>Description</th>
                    <th>Specification</th>
                    <th>Result</th>
                    <th>PostGIS</th>
                    <th>MySQL</th>
                    <th>Oracle Spatial</th>
                </tr>
                <tr>
                    <td>Spatial.startPoint(Curve))</td>
                    <td>Returns the first point of the Curve.</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>Spatial.endPoint(Curve))</td>
                    <td>Returns the last point of the Curve.</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>Spatial.isRing(Curve)</td>
                    <td>Returns TRUE if Curve is closed and simple. .</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_warning_sml.gif" border="0" alt=""/> [1]</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_error_sml.gif" border="0" alt=""/> [2]</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
            </table>
            <p>[1] Oracle does not allow boolean expressions in the SELECT-list.<br /> 
                [2] MySQL does not implement these functions.</p>
            <br />
            <p>
                <b>Functions on Type Curve and Type MultiCurve</b> (OGC SF 3.2.12, 3.2.17)
            </p>
            <table>
                <tr>
                    <th>Method</th>
                    <th>Description</th>
                    <th>Specification</th>
                    <th>Result</th>
                    <th>PostGIS</th>
                    <th>MySQL</th>
                    <th>Oracle Spatial</th>
                </tr>
                <tr>
                    <td>Spatial.isClosed(Curve)<br />Spatial.isClosed(MultiCurve)</td>
                    <td>Returns TRUE if Curve is closed, i.e., if 
                        StartPoint(Curve) = EndPoint(Curve).</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_warning_sml.gif" border="0" alt=""/> [1]</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>Spatial.length(Curve)<br />Spatial.length(MultiCurve)</td>
                    <td>Returns the length of the Curve.</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
            </table>
            <p>[1] Oracle does not allow boolean expressions in the SELECT-list.</p>
            <br />
            <p>
                <b>Functions on Type LineString</b> (OGC SF 3.2.13)
            </p>
            <table>
                <tr>
                    <th>Method</th>
                    <th>Description</th>
                    <th>Specification</th>
                    <th>Result</th>
                    <th>PostGIS</th>
                    <th>MySQL</th>
                    <th>Oracle Spatial</th>
                </tr>
                <tr>
                    <td>Spatial.numPoints(LineString)</td>
                    <td>Returns the number of points in the LineString.</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>Spatial.pointN(LineString, Integer)</td>
                    <td>Returns Point n.</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
            </table>
            <br />
            <p>
                <b>Functions on Type Surface and Type MultiSurface</b> (OGC SF 3.2.14, 3.2.18)
            </p>
            <table>
                <tr>
                    <th>Method</th>
                    <th>Description</th>
                    <th>Specification</th>
                    <th>Result</th>
                    <th>PostGIS</th>
                    <th>MySQL</th>
                    <th>Oracle Spatial</th>
                </tr>
                <tr>
                    <td>Spatial.centroid(Surface)<br />centroid(MultiSurface)</td>
                    <td>Returns the centroid of Surface, which may lie outside of it.</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_error_sml.gif" border="0" alt=""/> [1]</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>Spatial.pointOnSurface(Surface)<br />pointOnSurface(MultiSurface)</td>
                    <td>Returns a Point guaranteed to lie on the surface.</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_error_sml.gif" border="0" alt=""/> [1]</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>Spatial.area(Surface)<br />area(MultiSurface)</td>
                    <td>Returns the area of Surface.</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
            </table>
            <p>[1] MySQL does not implement these functions.</p>
            <br />
            <p>
                <b>Functions on Type Polygon</b> (OGC SF 3.2.15)
            </p>
            <table>
                <tr>
                    <th>Method</th>
                    <th>Description</th>
                    <th>Specification</th>
                    <th>Result</th>
                    <th>PostGIS</th>
                    <th>MySQL</th>
                    <th>Oracle Spatial</th>
                </tr>
                <tr>
                    <td>Spatial.exteriorRing(Polygon)</td>
                    <td>Returns the exterior ring of Polygon.</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>Spatial.numInteriorRing(Polygon)</td>
                    <td>Returns the number of interior rings.</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>Spatial.interiorRingN(Polygon, Integer)</td>
                    <td>Returns the nth interior ring.</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
            </table>
            <br />
            <p>
                <b>Functions on Type GeomCollection</b> (OGC SF 3.2.16)
            </p>
            <table>
                <tr>
                    <th>Method</th>
                    <th>Description</th>
                    <th>Specification</th>
                    <th>Result</th>
                    <th>PostGIS</th>
                    <th>MySQL</th>
                    <th>Oracle Spatial</th>
                </tr>
                <tr>
                    <td>Spatial.numGeometries(GeomCollection)</td>
                    <td>Returns the number of geometries in the 
                        collection.</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>Spatial.geometryN(GeomCollection, Integer)</td>
                    <td>Returns the nth geometry in the collection.</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
            </table>
            <br />
            <p>
                <b>Functions that test Spatial Relationships</b> (OGC SF 3.2.19)    
            </p>
            <table>
                <tr>
                    <th>Method</th>
                    <th>Description</th>
                    <th>Specification</th>
                    <th>Result [1]</th>
                    <th>PostGIS</th>
                    <th>MySQL</th>
                    <th>Oracle Spatial</th>
                </tr>
                <tr>
                    <td>Spatial.equals(Geometry, Geometry)</td>
                    <td>TRUE if the two geometries are spatially equal.</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_warning_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_warning_sml.gif" border="0" alt=""/> [2]</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>Spatial.disjoint(Geometry, Geometry)</td>
                    <td>TRUE if the two geometries are spatially disjoint.</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_warning_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_warning_sml.gif" border="0" alt=""/> [2]</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>Spatial.touches(Geometry, Geometry)</td>
                    <td>TRUE if the first Geometry spatially touches the other Geometry.</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_warning_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_warning_sml.gif" border="0" alt=""/> [2]</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>Spatial.within(Geometry, Geometry)</td>
                    <td>TRUE if first Geometry is completely contained in second Geometry.</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_warning_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_warning_sml.gif" border="0" alt=""/> [2]</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>Spatial.overlaps(Geometry, Geometry)</td>
                    <td>TRUE if first Geometries is spatially overlapping the other Geometry.</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_warning_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_warning_sml.gif" border="0" alt=""/> [2]</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>Spatial.crosses(Geometry, Geometry)</td>
                    <td>TRUE if first Geometry crosses the other Geometry.</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_warning_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_error_sml.gif" border="0" alt=""/> [3]</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>Spatial.intersects(Geometry, Geometry)</td>
                    <td>TRUE if first Geometry spatially intersects the other Geometry.</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_warning_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_warning_sml.gif" border="0" alt=""/> [2]</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>Spatial.contains(Geometry, Geometry)</td>
                    <td>TRUE if second Geometry is completely contained in first Geometry.</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_warning_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_warning_sml.gif" border="0" alt=""/> [2]</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>Spatial.relate(Geometry, Geometry, String)</td>
                    <td>TRUE if the spatial relationship specified by the patternMatrix holds.</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_warning_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_error_sml.gif" border="0" alt=""/> [3]</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
            </table>
            <p>[1] Oracle does not allow boolean expressions in the SELECT-list.<br />
                [2] MySQL does not implement these functions according to the specification.They return the same result 
                as the corresponding MBR-based functions.<br />
                [3] MySQL does not implement these functions.</p>
            <br />
            <p>
                <b>Function on Distance Relationships</b> (OGC SF 3.2.20)    
            </p>
            <table>
                <tr>
                    <th>Method</th>
                    <th>Description</th>
                    <th>Specification</th>
                    <th>Result</th>
                    <th>PostGIS</th>
                    <th>MySQL</th>
                    <th>Oracle Spatial</th>
                </tr>
                <tr>
                    <td>Spatial.distance(Geometry, Geometry)</td>
                    <td>Returns the distance between the two geometries.</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/> [1]</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
            </table>
            <p>[1] MariaDB 5.3.3+ implements this.</p>
            <br />
            <p>
                <b>Functions that implement Spatial Operators</b> (OGC SF 3.2.21)    
            </p>
            <table>
                <tr>
                    <th>Method</th>
                    <th>Description</th>
                    <th>Specification</th>
                    <th>Result</th>
                    <th>PostGIS</th>
                    <th>MySQL [1]</th>
                    <th>Oracle Spatial</th>
                </tr>
                <tr>
                    <td>Spatial.intersection(Geometry, Geometry)</td>
                    <td>Returns a Geometry that is the set intersection of the two geometries.</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_error_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>Spatial.difference(Geometry, Geometry)</td>
                    <td>Returns a Geometry that is the closure of the set difference of the two geometries.</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_error_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>Spatial.union(Geometry, Geometry)</td>
                    <td>Returns a Geometry that is the set union of the two geometries.</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_error_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>Spatial.symDifference(Geometry, Geometry)</td>
                    <td>Returns a Geometry that is the closure of the set symmetric difference of the two geometries.</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_error_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>Spatial.buffer(Geometry, Double)</td>
                    <td>Returns as Geometry defined by buffering a distance around the Geometry.</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_error_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>Spatial.convexHull(Geometry)</td>
                    <td>Returns a Geometry that is the convex hull of the Geometry.</td>
                    <td>OGC SF</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_error_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
            </table>
            <p>[1] These functions are currently not implemented in MySQL. They may appear in future releases.</p>
            <br />
            <p><b>Test whether the bounding box of one geometry intersects the bounding box of another</b></p>
            <table>
                <tr>
                    <th>Method</th>
                    <th>Description</th>
                    <th>Result</th>
                    <th>PostGIS</th>
                    <th>MySQL</th>
                    <th>Oracle Spatial</th>
                </tr>
                <tr>
                    <td>Spatial.bboxTest(Geometry, Geometry)</td>
                    <td>Returns TRUE if if the bounding box of the first Geometry overlaps second Geometry's bounding box</td>
                    <td><img src="../images/icon_warning_sml.gif" border="0" alt=""/> [1]</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
            </table>
            <p>[1] Oracle does not allow boolean expressions in the SELECT-list.</p>
            <br />
            <p><b>PostGIS Spatial Operators</b></p>
            <p>These functions are only supported on PostGIS.</p>
            <table>
                <tr>
                    <th>Method</th>
                    <th>Description</th>
                    <th>Result</th>
                </tr>
                <tr>
                    <td>PostGIS.bboxOverlapsLeft(Geometry, Geometry)</td>
                    <td>The PostGIS <code>&amp;&lt;</code> operator returns TRUE if the bounding box of the first Geometry overlaps or is to the left of second Geometry's bounding box</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>PostGIS.bboxOverlapsRight(Geometry, Geometry)</td>
                    <td>The PostGIS <code>&amp;&gt;</code> operator returns TRUE if the bounding box of the first Geometry overlaps or is to the right of second Geometry's bounding box</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>PostGIS.bboxLeft(Geometry, Geometry)</td>
                    <td>The PostGIS <code>&lt;&lt;</code> operator returns TRUE if the bounding box of the first Geometry overlaps or is strictly to the left of second Geometry's bounding box</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>PostGIS.bboxRight(Geometry, Geometry)</td>
                    <td>The PostGIS <code>&gt;&gt;</code> operator returns TRUE if the bounding box of the first Geometry overlaps or is strictly to the right of second Geometry's bounding box</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>PostGIS.bboxOverlapsBelow(Geometry, Geometry)</td>
                    <td>The PostGIS <code>&amp;&lt;@</code> operator returns TRUE if the bounding box of the first Geometry overlaps or is below second Geometry's bounding box</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>PostGIS.bboxOverlapsAbove(Geometry, Geometry)</td>
                    <td>The PostGIS <code>|&amp;&gt;</code> operator returns TRUE if the bounding box of the first Geometry overlaps or is above second Geometry's bounding box</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>PostGIS.bboxBelow(Geometry, Geometry)</td>
                    <td>The PostGIS <code>&lt;&lt;|</code> operator returns TRUE if the bounding box of the first Geometry is strictly below second Geometry's bounding box</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>PostGIS.bboxAbove(Geometry, Geometry)</td>
                    <td>The PostGIS <code>|&gt;&gt;</code> operator returns TRUE if the bounding box of the first Geometry is strictly above second Geometry's bounding box</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>PostGIS.sameAs(Geometry, Geometry)</td>
                    <td>The PostGIS <code>~=</code> operator returns TRUE if the two geometries are vertex-by-vertex equal.</td>
                     <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>PostGIS.bboxWithin(Geometry, Geometry)</td>
                    <td>The PostGIS <code>@</code> operator returns TRUE if the bounding box of the first Geometry overlaps or is completely contained by second Geometry's bounding box</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>PostGIS.bboxContains(Geometry, Geometry)</td>
                    <td>The PostGIS <code>~</code> operator returns TRUE if the bounding box of the first Geometry completely contains second Geometry's bounding box</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
            </table>
            <br />
            <p><b>MySQL specific Functions for Testing Spatial Relationships between Minimal Bounding Boxes</b></p>
            <p>These functions are only supported on MySQL.</p>
            <table>
                <tr>
                    <th>Method</th>
                    <th>Result</th>
                </tr>
                <tr>
                    <td>MySQL.mbrEqual(Geometry, Geometry)</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>MySQL.mbrDisjoint(Geometry, Geometry)</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>MySQL.mbrIntersects(Geometry, Geometry)</td>
                     <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>MySQL.mbrTouches(Geometry, Geometry)</td>
                     <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>MySQL.mbrWithin(Geometry, Geometry)</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>MySQL.mbrContains(Geometry, Geometry)</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
                <tr>
                    <td>MySQL.mbrOverlaps(Geometry, Geometry)</td>
                    <td><img src="../images/icon_success_sml.gif" border="0" alt=""/></td>
                </tr>
            </table>
            <br />
            <p><b>Oracle specific Functions for Constructing SDO_GEOMETRY types</b></p>
            <p>These functions are only supported on Oracle Geospatial.</p>
            <table>
                <tr>
                    <th>Method</th>
                    <th>Desription</th>
                </tr>
                <tr>
                    <td>
                        Oracle.sdo_geometry(<br />
                        Integer gtype,<br />
                        Integer srid,<br />
                        SDO_POINT point,<br />
                        SDO_ELEM_INFO_ARRAY elem_info,<br />
                        SDO_ORDINATE_ARRAY ordinates)
                    </td>
                    <td>Creates a SDO_GEOMETRY geometry from the passed geometry type, srid, point, element infos and ordinates.</td>
                </tr>
                <tr>
                    <td>
                        Oracle.sdo_point_type(Double x, Double y, Double z)
                    </td>
                    <td>Creates a SDO_POINT geometry from the passed ordinates.</td>
                </tr>
                <tr>
                    <td>
                        Oracle.sdo_elem_info_array(String numbers)
                    </td>
                    <td>Creates a SDO_ELEM_INFO_ARRAY from the passed comma-separeted integers.</td>
                </tr>
                <tr>
                    <td>
                        Oracle.sdo_ordinate_array(String ordinates)
                    </td>
                    <td>Creates a SDO_ORDINATE_ARRAY from the passed comma-separeted doubles.</td>
                </tr>
            </table>
            <br/>

            <p><b>Examples</b></p>
            <p>
                The following sections provide some examples of what can be done using spatial methods in JPQL queries. In the examples we use a
                class from the test suite. Here's the source code for reference:
            </p>
<source><![CDATA[
package mydomain.samples.pggeometry;

import org.postgis.LineString;

public class SampleLineString
{			
    private long id;
    private String name;
    private LineString geom;
                
    public SampleLineString(long id, String name, LineString lineString) 
    {
        this.id = id;
        this.name = name;
        this.geom = lineString;
    }
                
    public long getId() 
    {
        return id;
    }
    ....
}]]></source>
            <source><![CDATA[
<entity-mappings>
    <package>mydomain.samples.pggeometry</package>

    <entity class="mydomain.samples.pggeometry.SampleLineString">
        <extension vendor-name="datanucleus" key="spatial-dimension" value="2"/>
        <extension vendor-name="datanucleus" key="spatial-srid" value="4326"/>
        <attributes>
            <id name="id"/>
            <basic name="name"/>
            <basic name="geom">
                <extension vendor-name="datanucleus" key="mapping" value="no-userdata"/> [2]
            </basic>
        </attributes>
    </entity>
</entity-mappings>]]></source>            
            <br/>
            <subsection name="Example 1 - Spatial Function in the Filter of a Query">
                <p>
                    This example shows how to use spatial functions in the filter of a query. The query returns a list of
                    <code>SampleLineString</code>s whose line string has a length less than the given limit.
                </p>
<source><![CDATA[
Query q = em.createQuery("SELECT s FROM SampleLineString s WHERE geom IS NOT NULL AND Spatial.length(geom) < :limit");
q.setParameter("limit", new Double(100.0));
List list = q.getResultList();]]></source>
                <br/>
            </subsection>
            
            <subsection name="Example 2 - Spatial Function in the Result Part of a Query">
                <p>
                    This time we use a spatial function in the result part of a query. The query returns the length of the line string from the selected
                    <code>SampleLineString</code>
                </p>
<source><![CDATA[
q = em.createQuery("SELECT Spatial.pointN(geom, 2) FROM SampleLineString s WHERE id == :id");
q.setParameter("id", new Long(1001));
Geometry point = q.getSingleResult();]]></source>
                <br/>
            </subsection>
            
            <subsection name="Example 3 - Nested Functions">
                <p>
                    You may want to use nested functions in your query. This example shows how to do that. The query returns a list of
                    <code>SampleLineString</code>s, whose end point spatially equals a given point.
                </p>
                <source><![CDATA[
Point point = new Point("SRID=4326;POINT(110 45)");
Query q = em.createQuery("SELECT s FROM SampleLineString s WHERE geom IS NOT NULL AND Spatial.equals(Spatial.endPoint(geom), :point)");
q.setParameter("point", point);
List list = q.getResultList();
]]></source>
                <br/>
            </subsection>

        </section>
    </body>
</document>