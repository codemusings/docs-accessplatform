<?xml version="1.0" encoding="iso-8859-1"?>
<document xmlns="http://maven.apache.org/XDOC/2.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/XDOC/2.0 http://maven.apache.org/xsd/xdoc-2.0.xsd">
    <properties>
        <title>Cassandra Datastores</title>
    </properties>

    <body>
        <section name="Cassandra Datastores">
            <img src="../images/thirdparty/cassandra.png" border="0" alt=""/>
            <p>
                DataNucleus supports a limited for of persisting/retrieving objects to/from Cassandra datastores (using the 
                <a href="https://github.com/datanucleus/datanucleus-cassandra">datanucleus-cassandra</a> plugin, which utilises the
                DataStax Java driver). Simply specify your "connectionURL" as follows
            </p>
            <source>datanucleus.ConnectionURL=cassandra:[{host1}[:{port}] [,{host2} [,{host3}]]]</source>
            <p>
                where it will create a Cassandra <i>cluster</i> with contact points of <i>host1</i> (<i>host2</i>, <i>host3</i> etc), 
                and if the port is specified on the first host then will use that as the port (no port specified on alternate hosts).
            </p>
            <p>
                For example, to connect to a local server
            </p>
            <source>datanucleus.ConnectionURL=cassandra:</source>
            <p>
                It is intended to have this plugin feature complete by DataNucleus v4.0, but is available in GitHub for testing/improvement.
                <b>This plugin requires your assistance to make it as complete as possible. Don't expect anything if you aren't prepared to help</b>.
                The jars required to use DataNucleus Cassandra persistence are <i>datanucleus-core</i>,
                <i>datanucleus-api-jdo</i>/<i>datanucleus-api-jpa</i>, <i>datanucleus-cassandra</i>
                and <i>cassandra-driver-core</i>
            </p>
            <p>
                Things to bear in mind with Cassandra usage :-
            </p>
            <ul>
                <li>Cassandra doesn't use transactions, so any JDO/JPA transaction operation is a no-op (i.e will be ignored).</li>
                <li>This uses Cassandra 2.x (and CQL v3.x), not Thrift (like the previous unofficial attempts at a datanucleus-cassandra plugin used)</li>
                <li>You need to specify the "schema" (<i>datanucleus.mapping.Schema</i>)</li>
                <li>Queries are evaluated in-datastore when they only have (indexed) members and literals and using the operators ==, !=, &gt;, &gt;=, &lt;, &lt;=, &amp;&amp;, ||.</li>
                <li>You can also use CQL and get the results back as List&lt;Object[]&gt;</li>
            </ul>

        </section>
    </body>
</document>
