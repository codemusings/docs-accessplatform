<?xml version="1.0" encoding="UTF-8"?>
<document xmlns="http://maven.apache.org/XDOC/2.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/XDOC/2.0 http://maven.apache.org/xsd/xdoc-2.0.xsd">
    <properties>
        <title>IntelliJ IDEA Tutorial</title>
    </properties>

    <body>
        <section name="DataNucleus and IntelliJ IDEA">
            <p>
                IntelliJ IDEA is one of the most powerful development environments and DataNucleus provides
                its own plugin for transparently embedding the class enhancer into IDEA's build cycle.
                <b>Important : this plugin was written by Gerald Klinger using v11/12 of IDEA and v3 of DataNucleus. It has not been updated since so will likely 
                NOT work with recent versions of IDEA and DataNucleus. The source code is available at 
                <a href="https://github.com/datanucleus/datanucleus-idea-plugin">GitHub</a> and contributions are welcome to update it.
                You are advised to use IDEA's Maven/Ant integration instead</b>.
            </p>
            <ul>
                <li><a href="#notes">Features and notes</a></li>
                <li><a href="#install">Installation</a></li>
                <li><a href="#upgrade">Upgrade</a></li>
                <li><a href="#preferences">Plugin configuration</a></li>
            </ul>

            <a name="notes"/>
            <subsection name="Features and notes">
                <p>
                    What this plugin provides:
                </p>
                <ul>
                    <li>Transparent integration of the DataNucleus enhancer into IDEA's build cycle (classes will be
                        enhanced automatically after build)</li>
                    <li>Automatic detection of DataNucleus project modules by scanning the classpath for DataNucleus enhancer</li>
                    <li>Enabling/Disabling class enhancement per project module</li>
                    <li>Enhancement in test output directory (can be deactivated)</li>
                    <li>Supports annotation- and file-based metadata</li>
                    <li>JDO and JPA support</li>
                </ul>
                <p>
                    Notes:
                </p>
                <ul>
                    <li>A project module will only be detected if DataNucleus enhancer is in its classpath</li>
                    <li>Enhancement will only work if DataNucleus enhancer -and- its dependencies are in the module-classpath</li>
                    <li>Detected Project modules will not be activated automatically, an initial activation via the plugins
                        configuration dialog is necessary</li>
                    <li>Configuration dialog: classes subject to enhancement will only be shown after the first build.</li>
                </ul>
            </subsection>

            <a name="install"/>
            <subsection name="Plugin Installation">
                <p>
                    The DataNucleus plugin is part of the official IntelliJ IDEA plugin repository, hence installing is a trivial task.
                    Select <i>File -> Settings</i> to open the settings dialog and choose <b>Plugins</b>
                    Activate tab <b>Available</b> and scroll or search to <i>DataNucleus Enhancer integration</i>
                    Right-click and select <i>Download and install</i><br/>
                    After restart go to the settings dialog again, chose <i>DataNucleus Enhancer</i> and activate the relevant
                    project modules. See <a href="#preferences">Plugin configuration</a>.<br/><br/>
                </p>
                <img src="../../images/idea_installation.jpg" alt=""/>
                <br/>
                <br/>
                <p>
                    If necessary, the plugin can also be downloaded from the
                    <a href="http://plugins.jetbrains.com/plugin/?idea&amp;id=5381">official JetBrains plugin site</a> for manual installation.
                    Please refer to IDEA's documentation on how to do that.
                </p>
            </subsection>

            <a name="upgrade"/>
            <subsection name="Upgrading to a newer version">
                <p>
                    Updating older plugin versions to 1.0.4 or later does not work, they -must- be manually
                    uninstalled before upgrading!<br/>
                    Ignore IDEA's auto-upgrade request in this case. If you're reading this too late,
                    just uninstall and reinstall the plugin.
                </p>
            </subsection>

            <a name="preferences"/>
            <subsection name="Plugin configuration">
                <p>
                    The DataNucleus IDEA plugin transparently persists it's configuration into the IDEA project file, hence opening
                    a project will always restore it's last state.<br/>
                    The plugin configuration dialog can be found under <i>File -> Settings -> DataNucleus Enhancer</i>
                </p>
                <ul>
                    <li><b>Enable Enhancer</b> : Enable/Disable the enhancer for the whole project. Also possible via
                        <pre>Build -> DataNucleus Enhancer</pre></li>
                    <li><b>JDO/JPA</b> : Select the target api to enhance classes for</li>
                    <li><b>Include Test classes</b> : If enabled, also test output will be processed</li>
                    <li><b>Metadata file extensions</b> : If using metadata files instead of- or additionally to annotations, specify
                        the file extensions to search for (e.g. when using JDO with annotations but having orm related configuration in
                        separate xml files like 'ClassName.orm' or 'package.orm', then 'orm' has to be added here; for
                        JPA 'xml' would have to be added to find a file named 'orm.xml')</li>
                    <li><b>Add compiler resource patterns</b> : if enabled, metadata file extensions will be automatically added to
                        <pre>File -> Settings -> Compiler -> Resource patterns</pre> In case of removing extensions, resource
                        patterns have to be adapted manually</li>
                    <li><b>Affected Modules</b> : List of project modules with datanucleus enhancer in classpath and subject to
                        enhancement if checkbox under <pre>Enabled</pre> is active (Use this to activate/deactivate enhancement for
                        specific project modules). Will become available after IDEA completed
                        indexing the project.</li>
                    <li><b>Metadata and annotated classes for enhancement</b> : List of detected classes for enhancement. Will
                        become available after first build (only build target folders are scanned).</li>
                </ul>
                <br/>
                <img src="../../images/idea_preferences.jpg" alt=""/>
                <br/>
                <br/>
            </subsection>

		</section>
	</body>
</document>
